<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&display=swap"
      rel="stylesheet"
    />
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>TODE edit</title>

    <style>
      html, body, div, span, applet, object, iframe,
      h1, h2, h3, h4, h5, h6, p, blockquote, pre,
      a, abbr, acronym, address, big, cite, code,
      del, dfn, em, img, ins, kbd, q, s, samp,
      small, strike, strong, sub, sup, tt, var,
      b, u, i, center,
      dl, dt, dd, ol, ul, li,
      fieldset, form, label, legend,
      table, caption, tbody, tfoot, thead, tr, th, td,
      article, aside, canvas, details, embed, 
      figure, figcaption, footer, header, hgroup, 
      menu, nav, output, ruby, section, summary,
      time, mark, audio, video {
        margin: 0;
        padding: 0;
        border: 0;
        font-size: 100%;
        font: inherit;
        vertical-align: baseline;
      }
      /* HTML5 display-role reset for older browsers */
      article, aside, details, figcaption, figure, 
      footer, header, hgroup, menu, nav, section {
        display: block;
      }
      body {
        line-height: 1;
      }
      ol, ul {
        list-style: none;
      }
      blockquote, q {
        quotes: none;
      }
      blockquote:before, blockquote:after,
      q:before, q:after {
        content: '';
        content: none;
      }
      table {
        border-collapse: collapse;
        border-spacing: 0;
      }
      /* 리셋 css */


      .todo_edit{
          width: 1050px;
          margin: 0 auto;
          display: flex;
          flex-direction: row;
          flex-wrap: wrap;
          justify-self: left;
      }

      .wrap {
          width: 1440px;
          margin: 0 auto;
      }

      h1.logo{
          margin: 0 auto;
          width: 274px;
          padding-top: 130px;
          padding-bottom: 50px;
          position: relative;
          display: flex;
          justify-content: center;
          align-items: center;


      }

      h1.logo > a {
          display: inline-block;
          width: 35px;
          height: 35px;
          border: none;
          border-radius: 35px;
          position: relative;
          display: flex;
          justify-content: center;
          align-items: center;
      }

      h1.logo > a:hover {
          
          background: rgba(111,124,229,0.1) url('image/cramps.svg') center center no-repeat;
      }
      h1.logo > a img {
          position: absolute;
          
          /* width: 35px; */
          /* height: 35px; */
      }

      h1.logo s {
          color:#6f7ce5;
          font-size: 30px;
          text-decoration: none;
          font-style: normal;
          font-weight: 700;
          line-height: 43px;
      }


      h1.logo img{
          display: block;
          /* margin: 0 auto; */
          margin-left: 16px;
          margin-right: 15px;
      }

      .todo_edit h2 {
          font-size: 22px;
          font-weight: 700;
          font-style: bold;
          line-height: 31.86px;
          color:#6f7ce5;
          opacity: 0.9;
          margin-bottom: 20px;
      }

      .todo_edit{
          display: flex;
      }

      .todo_left{
          width: 460px;
      }

      .todo_input {
          position: relative;
      }

      #todo{
          width: 460px;
          height: 50px;
          font-size: 16px;
          line-height: 23.17px;
          font-weight: 500;
          color:#6b6b6b;
          box-sizing: border-box;
          border: 1px solid #d9d9d9;
          border-radius: 5px;
          padding: 14px 0 13px 20px;
          margin-bottom: 20px;
          
      }
      #todo::placeholder {
          font-size: 16px;
          line-height: 23.17px;
          color:#d9d9d9;
      }
      .todo_post {
        position: absolute;
        top: 16px;
        right: 23px;
        width: 18px;
        height: 18px;
        background-color: none;
        border: none;
        display: flex;
        justify-content: center;
        align-items: center;
      }
      .form_imoge{
          width: 18px;
          height: 18px;
          position: absolute;
          top: 0;
          right: 0;
          bottom: 16px;
      }
      #flush-headingOne .accordion-button{
          box-sizing: border-box;
          height: 40px;
          color:#6B6B6B !important;
          font-size: 16px;
          font-weight: 500;    
          line-height: 23.17px;
          background: rgba(111,124,229,0.1);
          border: none;
          border-radius: 5px 5px 0 0;
          box-shadow:none;
          position: relative;

      }

      #flush-headingOne .accordion-button::after{
          content: url('../image/arrow icon.svg');
          position: absolute;
          display: block;
          top: 14px;
          right: 23px;
          width: 12px;
          height: 12px;
          line-height: 12px;
          /* background-color: red; */
          background: inherit;

      }

      #flush-headingOne .accordion-button:hover::after {
          content: url('../image/hover/arrow icon.svg');
      }

      .accordion-body {
          box-sizing: border-box;
          border-left: 1px solid #d9d9d9;
          border-right: 1px solid #d9d9d9;
          border-bottom: 1px solid #d9d9d9;
          color:#d9d9d9;
          background: #fff;
          /* height: 144px; */
          max-height: 144px;
          overflow-y: scroll;
          padding: 0;
          border-radius: 0 0 5px 5px;

      }

      .accordion-body::-webkit-scrollbar{
          width: 3px;
          height: 10px;
      }

      .accordion-body::-webkit-scrollbar-thumb {
          border-radius: 3px;
          background-color: #E2E5E8;
      }



      .accordion-body > * {
          border: none;
      }



      .accordion-body li {
          padding: 0 0 6px 15px;
          font-weight: 400;
          font-size: 14px;
          line-height: 20.27px;
          color: #6b6b6b;
          padding-bottom: 6px;
          display: flex;
          justify-content: space-between;
          align-items: center;
      }
      .accordion-body li:first-child{
          padding-top: 10px;
      }
      .accordion-body li:last-child{
          padding-bottom: 10px;
      }


      button.close_btn {
          width: 10px;
          height: 10px;
          display: block;
          background: url('../image/close.svg') center center no-repeat;
          border: none;
          margin-right: 15px;
      }

      button.close_btn:hover{
          background-image: url('../image/hover/close.svg');
      }


      .picture {
          margin-top: 35px;    
          width: 460px;
      }

      .picture form {
          height: 300px;
          border: 1px dashed #D9D9D9;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          box-sizing: border-box;
          position: relative;
      }

      .picture form p {
          font-size: 16px;
          font-weight: 500;
          line-height: 23px;
          color:#6b6b6b;
          margin-bottom: 15px;
      }

      .picture form label.comp{
          display: block;
          text-align: center;
          line-height: 30px;
      }

      #image_container {
          position: absolute;
          top: 0;
          left: 0;
          z-index: -1;
          display: block;
          width: 460px;
          height: 300px;
          /* background: red; */
          overflow: hidden;

      }
      #image_container img{
          width: 100%;
      }
      #chooseFile {
          visibility: hidden;
          position: absolute;
          top: 0;
          bottom: 0;
      }

      .todo_right {
          width: 550px;
          margin-left: 40px;
      }

      .todo_diary {
          display: flex;
          flex-direction: row;
          justify-content: space-between;
      }



      .comp {
          width: 100px;
          height: 30px;
          font-size: 15px;
          font-weight: 500;
          line-height: 30px;
          color:#fff;
          background: #6f7ce5;
          border: none;
          border-radius: 100px;
          cursor: pointer;
      }

      .comp:hover {
          opacity: 0.5;
      }

      #todo_area {
          /* margin-top: 20px; */
          width: 550px;
          height: 497px;
          font-size: 16px;
          font-weight: bold;
          color:#d9d9d9;
          padding-top: 25px;
          padding-left: 25px;
          border: 1px solid #d9d9d9;
          border-radius: 5px;
          resize: none;
      }

      #todo_area::placeholder {
          color: #d9d9d9;
      }
    </style>
    <script>
      $(document).ready(function(){

      $(".form_imoge").hover(function(){
          $(this).attr("src", "image/hover/Vector.svg");
          }, function(){
          $(this).attr("src", "image/Vector.svg");
          });


      let toggle_img = $(".todo_toggle_close")
      toggle_img.hover(function(){
          $(this).children().first().attr("src", "/static/img/hover/Rectangle 3.svg")
          $(this).children().last().attr("src", "/static/img/hover/Rectangle 4.svg")
      }, function(){
          $(this).children().first().attr("src", "/static/img/Rectangle 3.svg")
          $(this).children().last().attr("src", "/static/img/Rectangle 4.svg")
          });
      });

      function setThumbnail(event) {
      var reader = new FileReader();

      reader.onload = function(event) {
        var img = document.createElement("img");
        img.setAttribute("src", event.target.result);
        document.querySelector("div#image_container").appendChild(img);
      };

      reader.readAsDataURL(event.target.files[0]);
      }

      let close_btn = document.querySelectorAll('.close_btn');

      for (let i = 0; i < close_btn.length; i++){
      let accordion_li = close_btn[i].parentElement;

      close_btn[i].addEventListener('click', ()=>{
          // console.log(accordion_li);
          accordion_li.remove();
          
      })
      }

      $(document).ready(function () {
        show_todo();
      });

      // 불러오기
      function show_todo() {
        fetch('/todo').then(res => res.json()).then(data => {
                let rows = data['result']
                $('.accordion-body ul').empty();
                rows.forEach((a)=>{
                  let todo = a['todo']
                  let temp_html = `<li>${todo}<button class="close_btn"></button></li>`
                  $('.accordion-body ul').append(temp_html);
                })
            })
      }

      // 저장
      function save_todo() {

          let todo = $('#todo').val()
          let formData = new FormData();
          formData.append("todolist_give", todo);


          fetch('/todo', {method: "POST",body: formData,}).then((response) => response.json()).then((data) => {
              // alert(data["msg"]);
              window.location.reload();s
              });
      }
    </script>
  </head>
  <body>
    <div class="wrap">
      <h1 class="logo">
        <a href="#"><img src="/static/img/cramps.svg" alt=""></a>
        <img
          src="/static/img/logo.svg"
          alt="todo list edit"
        />
        <s>EDIT</s>
      </h1>
      <div class="todo_edit">
        <div class="todo_left">
          <div class="todo_list">
            <h2>TO-DO LIST</h2>
            <div class="todo_form">
              <div class="todo_input">
                <label for="todo" hidden>todo_list</label>
                <input
                  id="todo"
                  type="text"
                  name="todo"
                  placeholder="오늘의 할일"
                />

                <button class="todo_post"  type="button" onclick="save_todo()" >
                  <img class="form_imoge" src="/static/img/Vector.svg" alt="연필모양 아이콘"/>
                </button>
              </div>

              <!-- <div class="todo_toggle">

                <p>작성된 투두리스트</p>
                <button>
                    <img src="image/hover/arrow icon.svg" alt="" />
                </button>
                <ul class="todo_toggle_list">
                  <li>
                    오늘의 할일
                    <div class="todo_toggle_close">
                      <img src="image/Rectangle 3.svg" alt="" /><img
                        src="image/Rectangle 4.svg"
                        alt=""
                      />
                    </div>
                  </li>
                  <li>
                    오늘의 할일
                    <div class="todo_toggle_close">
                      <img src="image/Rectangle 3.svg" alt="" /><img
                        src="image/Rectangle 4.svg"
                        alt=""
                      />
                    </div>
                  </li>
                  <li>
                    오늘의 할일
                    <div class="todo_toggle_close">
                      <img src="image/Rectangle 3.svg" alt="" /><img
                        src="image/Rectangle 4.svg"
                        alt=""
                      />
                    </div>
                  </li>
                  <li>
                    오늘의 할일
                    <div class="todo_toggle_close">
                      <img src="image/Rectangle 3.svg" alt="" /><img
                        src="image/Rectangle 4.svg"
                        alt=""
                      />
                    </div>
                  </li>
                  <li>
                    오늘의 할일
                    <div class="todo_toggle_close">
                      <img src="image/Rectangle 3.svg" alt="" /><img
                        src="image/Rectangle 4.svg"
                        alt=""
                      />
                    </div>
                  </li>
                </ul>
              </div> -->

              <div class="accordion accordion-flush" id="accordionFlushExample">
                <div class="accordion-item">
                  <h3 class="accordion-header" id="flush-headingOne">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne">
                      작성된 투두리스트
                    </button>
                  </h3>
                  <div id="flush-collapseOne" class="accordion-collapse collapse" aria-labelledby="flush-headingOne" data-bs-parent="#accordionFlushExample">
                    <div class="accordion-body">
                      <ul>
                        <li>오늘의 할일<button class="close_btn"></button></li>
                        <li>오늘의 할일<button class="close_btn"></button></li>
                        <li>오늘의 할일<button class="close_btn"></button></li>
                        <li>오늘의 할일<button class="close_btn"></button></li>
                        <li>오늘의 할일<button class="close_btn"></button></li>
                        <li>오늘의 할일<button class="close_btn"></button></li>
                        <li>오늘의 할일<button class="close_btn"></button></li>
                        
                      </ul>
                    </div>
                  </div>
                </div>
              </div>

            </div>
          </div>
          <div class="picture">
            <h2>PICTURE</h2>
            <form method="post" enctype="multipart/form-data">
              
              <p>사진을 업로드 해보세요</p>
              <div class="button">
                <input type="file" id="chooseFile" accept="image/*" onchange="setThumbnail(event);"/>
                <div id="image_container"></div>
                <label for="chooseFile" class="comp"> 불러오기 </label>
              </div>
              <!-- <input type="file" id="chooseFile" name="chooseFile" accept="image/*" onchange="loadFile(this)"/> -->
            </form>
          </div>
        </div>

        <div class="todo_right">
          <div class="todo_diary">
            <h2><label for="todo_area">DIARY</label></h2>

            <button class="comp">작성완료</button>
          </div>
          <textarea
            name="todo_area"
            id="todo_area"
            cols="30"
            rows="10"
            placeholder="오늘의 일기를 작성해보세요"
          ></textarea>
        </div>
      </div>
    </div>
    <!-- JavaScript Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
  <script src="js/main.js"></script>
  </body>
</html>
